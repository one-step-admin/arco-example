import{d as $,r as m,a as i,o as k,c as R,w as n,b as c,e,u as o,f as p,g as S,M as U,_ as z,h as Z,i as j,j as C,F as B,t as K,k as E,l as O,T as H,m as X,p as J,n as Q,q as W}from"./index-DNgamTHa.js";import{_ as Y,C as ee,i as oe}from"./index-D-nBA-qs.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ne=c("h3",{class:"mb-8 text-xl color-[var(--el-text-color-primary)] font-bold"}," 忘记密码了? 🔒 ",-1),se={class:"mt-4 flex-center gap-2 text-sm color-[var(--el-text-color-secondary)]"},le=$({name:"ResetPasswordForm",__name:"index",props:{account:{}},emits:["onLogin","onResetPassword"],setup(x,{emit:A}){const y=x,g=A,b=m(!1),d=m(),s=m({account:y.account??localStorage.login_account??"",captcha:"",newPassword:""}),_=m({account:[{required:!0,message:"请输入用户名"}],captcha:[{required:!0,message:"请输入验证码"}],newPassword:[{required:!0,message:"请输入新密码"},{min:6,max:18,message:"密码长度为6到18位"}]});function h(){var t;U.info("重置密码仅提供界面演示，无实际功能，需开发者自行扩展"),(t=d.value)==null||t.validate(()=>{g("onResetPassword",s.value.account)})}return(t,a)=>{const f=z,w=i("AInput"),l=i("AFormItem"),r=i("AButton"),P=i("AInputGroup"),V=i("AInputPassword"),L=i("ALink"),I=i("AForm");return k(),R(I,{id:"reset",ref_key:"formRef",ref:d,model:o(s),rules:o(_),class:"min-h-500px w-full flex-col-stretch-center p-12"},{default:n(()=>[ne,c("div",null,[e(l,{field:"account","hide-label":""},{default:n(()=>[e(w,{modelValue:o(s).account,"onUpdate:modelValue":a[0]||(a[0]=u=>o(s).account=u),size:"large",placeholder:"用户名",tabindex:"1"},{prefix:n(()=>[e(f,{name:"ri:user-3-fill"})]),_:1},8,["modelValue"])]),_:1}),e(l,{field:"captcha","hide-label":""},{default:n(()=>[e(P,{style:{width:"100%"}},{default:n(()=>[e(w,{modelValue:o(s).captcha,"onUpdate:modelValue":a[1]||(a[1]=u=>o(s).captcha=u),size:"large",placeholder:"验证码",tabindex:"2"},{prefix:n(()=>[e(f,{name:"ic:baseline-verified-user"})]),_:1},8,["modelValue"]),e(r,{size:"large"},{default:n(()=>[p(" 发送验证码 ")]),_:1})]),_:1})]),_:1}),e(l,{field:"newPassword","hide-label":""},{default:n(()=>[e(V,{modelValue:o(s).newPassword,"onUpdate:modelValue":a[2]||(a[2]=u=>o(s).newPassword=u),size:"large",placeholder:"新密码",tabindex:"3"},{prefix:n(()=>[e(f,{name:"ri:lock-2-fill"})]),_:1},8,["modelValue"])]),_:1})]),e(r,{loading:o(b),type:"primary",size:"large",style:{width:"100%","margin-top":"20px"},onClick:S(h,["prevent"])},{default:n(()=>[p(" 确认 ")]),_:1},8,["loading"]),c("div",se,[e(L,{type:"link",onClick:a[3]||(a[3]=u=>g("onLogin",o(s).account))},{default:n(()=>[p(" 去登录 ")]),_:1})])]),_:1},8,["model","rules"])}}}),ae=c("h3",{class:"mb-8 text-xl color-[var(--el-text-color-primary)] font-bold"}," 探索从这里开始! 🚀 ",-1),re={class:"mt-4 flex-center gap-2 text-sm color-[var(--el-text-color-secondary)]"},ie=$({name:"RegisterForm",__name:"index",props:{account:{}},emits:["onLogin","onRegister"],setup(x,{emit:A}){const y=x,g=A,b=m(!1),d=m(),s=m({account:y.account??"",captcha:"",password:"",checkPassword:""}),_=m({account:[{required:!0,message:"请输入用户名"}],captcha:[{required:!0,message:"请输入验证码"}],password:[{required:!0,message:"请输入密码"},{min:6,max:18,message:"密码长度为6到18位"}],checkPassword:[{required:!0,message:"请再次输入密码"},{validator:async(t,a)=>t!==s.value.password?a("两次输入的密码不一致"):a()}]});function h(){var t;U.info("注册模块仅提供界面演示，无实际功能，需开发者自行扩展"),(t=d.value)==null||t.validate(()=>{g("onRegister",s.value.account)})}return(t,a)=>{const f=z,w=i("AInput"),l=i("AFormItem"),r=i("AButton"),P=i("AInputGroup"),V=i("AInputPassword"),L=i("ALink"),I=i("AForm");return k(),R(I,{id:"register",ref_key:"formRef",ref:d,model:o(s),rules:o(_),class:"min-h-500px w-full flex-col-stretch-center p-12"},{default:n(()=>[ae,c("div",null,[e(l,{field:"account","hide-label":""},{default:n(()=>[e(w,{modelValue:o(s).account,"onUpdate:modelValue":a[0]||(a[0]=u=>o(s).account=u),size:"large",placeholder:"用户名",tabindex:"1"},{prefix:n(()=>[e(f,{name:"ri:user-3-fill"})]),_:1},8,["modelValue"])]),_:1}),e(l,{field:"captcha","hide-label":""},{default:n(()=>[e(P,{style:{width:"100%"}},{default:n(()=>[e(w,{modelValue:o(s).captcha,"onUpdate:modelValue":a[1]||(a[1]=u=>o(s).captcha=u),size:"large",placeholder:"验证码",tabindex:"2"},{prefix:n(()=>[e(f,{name:"ic:baseline-verified-user"})]),_:1},8,["modelValue"]),e(r,{size:"large"},{default:n(()=>[p(" 发送验证码 ")]),_:1})]),_:1})]),_:1}),e(l,{field:"password","hide-label":""},{default:n(()=>[e(V,{modelValue:o(s).password,"onUpdate:modelValue":a[2]||(a[2]=u=>o(s).password=u),size:"large",placeholder:"密码",tabindex:"3"},{prefix:n(()=>[e(f,{name:"ri:lock-2-fill"})]),_:1},8,["modelValue"])]),_:1}),e(l,{field:"checkPassword","hide-label":""},{default:n(()=>[e(V,{modelValue:o(s).checkPassword,"onUpdate:modelValue":a[3]||(a[3]=u=>o(s).checkPassword=u),size:"large",placeholder:"确认密码",tabindex:"4"},{prefix:n(()=>[e(f,{name:"ri:lock-2-fill"})]),_:1},8,["modelValue"])]),_:1})]),e(r,{loading:o(b),type:"primary",size:"large",style:{width:"100%","margin-top":"20px"},onClick:S(h,["prevent"])},{default:n(()=>[p(" 注册 ")]),_:1},8,["loading"]),c("div",re,[p(" 已经有帐号? "),e(L,{type:"link",onClick:a[4]||(a[4]=u=>g("onLogin",o(s).account))},{default:n(()=>[p(" 去登录 ")]),_:1})])]),_:1},8,["model","rules"])}}}),ce={class:"mb-6"},de={class:"mb-8 text-xl color-[var(--el-text-color-primary)] font-bold"},ue={class:"mb-4 flex-center-between"},me={class:"mt-4 flex-center gap-2 text-sm color-[var(--el-text-color-secondary)]"},pe={key:1,class:"flex-col-center"},fe=c("img",{src:"https://s2.loli.net/2024/04/26/GsahtuIZ9XOg5jr.png",class:"h-[250px] w-[250px]"},null,-1),_e=c("div",{class:"mt-2 op-50"}," 请使用微信扫码登录 ",-1),ge=[fe,_e],ve={class:"mt-4 text-center -mb-4"},xe=$({name:"LoginForm",__name:"index",props:{account:{}},emits:["onLogin","onRegister","onResetPassword"],setup(x,{emit:A}){const y=x,g=A,b=Z(),d="One-step-admin 基础版",s=m(!1),_=m("default"),h=m(),t=m({account:y.account??localStorage.login_account??"",password:"",remember:!!localStorage.login_account}),a=m({account:[{required:!0,message:"请输入用户名"}],password:[{required:!0,message:"请输入密码"},{min:6,max:18,message:"密码长度为6到18位"}]});function f(){var l;(l=h.value)==null||l.validate(r=>{r||(s.value=!0,b.login(t.value).then(()=>{s.value=!1,t.value.remember?localStorage.setItem("login_account",t.value.account):localStorage.removeItem("login_account"),g("onLogin",t.value.account)}).finally(()=>{s.value=!1}))})}function w(l){t.value.account=l,t.value.password="123456",f()}return(l,r)=>{const P=Y,V=z,L=i("AInput"),I=i("AFormItem"),u=i("AInputPassword"),T=i("ACheckbox"),q=i("ALink"),F=i("AButton"),M=i("ADivider"),N=i("ASpace"),D=i("AForm");return k(),R(D,{id:"login",ref_key:"formRef",ref:h,model:o(t),rules:o(a),class:"min-h-500px w-full flex-col-stretch-center p-12"},{default:n(()=>[c("div",ce,[e(P,{modelValue:o(_),"onUpdate:modelValue":r[0]||(r[0]=v=>j(_)?_.value=v:null),options:[{label:"账号密码登录",value:"default"},{label:"扫码登录",value:"qrcode"}]},null,8,["modelValue"])]),o(_)==="default"?(k(),C(B,{key:0},[c("h3",de," 欢迎使用 "+K(o(d))+" ! 👋🏻 ",1),c("div",null,[e(I,{field:"account","hide-label":""},{default:n(()=>[e(L,{modelValue:o(t).account,"onUpdate:modelValue":r[1]||(r[1]=v=>o(t).account=v),size:"large",placeholder:"用户名",tabindex:"1"},{prefix:n(()=>[e(V,{name:"ri:user-3-fill"})]),_:1},8,["modelValue"])]),_:1}),e(I,{field:"password","hide-label":""},{default:n(()=>[e(u,{modelValue:o(t).password,"onUpdate:modelValue":r[2]||(r[2]=v=>o(t).password=v),size:"large",placeholder:"密码",tabindex:"2",onKeyup:E(f,["enter"])},{prefix:n(()=>[e(V,{name:"ri:lock-2-fill"})]),_:1},8,["modelValue"])]),_:1})]),c("div",ue,[e(T,{checked:o(t).remember,"onUpdate:checked":r[3]||(r[3]=v=>o(t).remember=v)},{default:n(()=>[p(" 记住我 ")]),_:1},8,["checked"]),e(q,{type:"link",onClick:r[4]||(r[4]=v=>g("onResetPassword",o(t).account))},{default:n(()=>[p(" 忘记密码了? ")]),_:1})]),e(F,{loading:o(s),type:"primary",size:"large",style:{width:"100%"},onClick:S(f,["prevent"])},{default:n(()=>[p(" 登录 ")]),_:1},8,["loading"]),c("div",me,[p(" 还没有帐号? "),e(q,{type:"link",onClick:r[5]||(r[5]=v=>g("onRegister",o(t).account))},{default:n(()=>[p(" 创建新帐号 ")]),_:1})])],64)):o(_)==="qrcode"?(k(),C("div",pe,ge)):O("",!0),c("div",ve,[e(M,null,{default:n(()=>[p("演示账号一键登录")]),_:1}),e(N,null,{default:n(()=>[e(F,{type:"primary",size:"small",plain:"",onClick:r[6]||(r[6]=v=>w("admin"))},{default:n(()=>[p(" admin ")]),_:1}),e(F,{size:"small",plain:"",onClick:r[7]||(r[7]=v=>w("test"))},{default:n(()=>[p(" test ")]),_:1})]),_:1})])]),_:1},8,["model","rules"])}}}),we=""+new URL("login-banner-ZfMZACb6.png",import.meta.url).href,G=x=>(J("data-v-e76978b8"),x=x(),Q(),x),be=G(()=>c("div",{class:"bg-banner"},null,-1)),ke={class:"login-box"},Ae=G(()=>c("div",{class:"login-banner"},[c("img",{src:oe,class:"absolute left-4 top-4 h-30px rounded ring ring-stone-2 dark-ring-stone-8"}),c("img",{src:we,class:"banner"})],-1)),ye={class:"login-form flex-col-center"},he=$({name:"Login",__name:"login",setup(x){var _;const A=X(),y=W(),g=m(((_=A.query.redirect)==null?void 0:_.toString())??"/"),b=m(),d=m("login"),s=m();return(h,t)=>{const a=xe,f=ie,w=le;return k(),C(B,null,[be,c("div",ke,[Ae,c("div",ye,[e(H,{name:"fade",mode:"out-in"},{default:n(()=>[o(d)==="login"?(k(),R(a,{key:0,ref_key:"formRef",ref:s,account:o(b),onOnLogin:t[0]||(t[0]=l=>o(y).push(o(g))),onOnRegister:t[1]||(t[1]=l=>{d.value="register",l=l}),onOnResetPassword:t[2]||(t[2]=l=>{d.value="resetPassword",l=l})},null,8,["account"])):o(d)==="register"?(k(),R(f,{key:1,ref_key:"formRef",ref:s,account:o(b),onOnRegister:t[3]||(t[3]=l=>{d.value="login",l=l}),onOnLogin:t[4]||(t[4]=l=>d.value="login")},null,8,["account"])):o(d)==="resetPassword"?(k(),R(w,{key:2,ref_key:"formRef",ref:s,account:o(b),onOnResetPassword:t[5]||(t[5]=l=>{d.value="login",l=l}),onOnLogin:t[6]||(t[6]=l=>d.value="login")},null,8,["account"])):O("",!0)]),_:1})])]),e(ee)],64)}}}),Pe=te(he,[["__scopeId","data-v-e76978b8"]]);export{Pe as default};
